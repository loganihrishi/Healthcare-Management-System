<html>
<head>
<title>PatientDetailsGUI.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #629755; font-style: italic;}
.s3 { color: #808080;}
.s4 { color: #6a8759;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
PatientDetailsGUI.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">ui.gui</span><span class="s0">;</span>

<span class="s0">import </span><span class="s1">model.Patient</span><span class="s0">;</span>

<span class="s0">import </span><span class="s1">javax.swing.*</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.awt.*</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.awt.event.ActionEvent</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.awt.event.ActionListener</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.io.IOException</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.time.LocalDate</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">java.time.format.DateTimeFormatter</span><span class="s0">;</span>
<span class="s2">/**</span>
 <span class="s2">* Represents the GUI class for adding the patient details.</span>
 <span class="s2">*/</span>

<span class="s0">public class </span><span class="s1">PatientDetailsGUI </span><span class="s0">extends </span><span class="s1">StartApplicationGUI {</span>

    <span class="s3">// EFFECTS: starts the PatientDetailsGUI part of the main GUI</span>
    <span class="s0">public </span><span class="s1">PatientDetailsGUI() </span><span class="s0">throws </span><span class="s1">IOException {</span>
        <span class="s0">super</span><span class="s1">()</span><span class="s0">;</span>
        <span class="s1">addPatient()</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// MODIFIES: this</span>
    <span class="s3">// EFFECTS: creates the GUI for Patient details</span>
    <span class="s1">@SuppressWarnings(</span><span class="s4">&quot;methodlength&quot;</span><span class="s1">)</span>
    <span class="s0">private void </span><span class="s1">addPatient() {</span>
        <span class="s1">JFrame frame = </span><span class="s0">new </span><span class="s1">JFrame(</span><span class="s4">&quot;Add Patient&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">JLabel nameLabel = </span><span class="s0">new </span><span class="s1">JLabel(</span><span class="s4">&quot;Name:&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">JTextField nameField = </span><span class="s0">new </span><span class="s1">JTextField()</span><span class="s0">;</span>
        <span class="s1">JLabel ageLabel = </span><span class="s0">new </span><span class="s1">JLabel(</span><span class="s4">&quot;Age:&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">JTextField ageField = </span><span class="s0">new </span><span class="s1">JTextField()</span><span class="s0">;</span>
        <span class="s1">JLabel sexLabel = </span><span class="s0">new </span><span class="s1">JLabel(</span><span class="s4">&quot;Sex (M/F):&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">JTextField sexField = </span><span class="s0">new </span><span class="s1">JTextField()</span><span class="s0">;</span>
        <span class="s1">JLabel insLbl = </span><span class="s0">new </span><span class="s1">JLabel(</span><span class="s4">&quot;Insurance:&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">JTextField insField = </span><span class="s0">new </span><span class="s1">JTextField()</span><span class="s0">;</span>
        <span class="s1">JLabel phnLabel = </span><span class="s0">new </span><span class="s1">JLabel(</span><span class="s4">&quot;Personal Health Number:&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">JTextField phnField = </span><span class="s0">new </span><span class="s1">JTextField()</span><span class="s0">;</span>
        <span class="s1">JLabel disNameLbl = </span><span class="s0">new </span><span class="s1">JLabel(</span><span class="s4">&quot;Disease Name:&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">JTextField disNameFld = </span><span class="s0">new </span><span class="s1">JTextField()</span><span class="s0">;</span>
        <span class="s1">JLabel dateLbl = </span><span class="s0">new </span><span class="s1">JLabel(</span><span class="s4">&quot;Diagnosis Date (yyyy-MM-dd):&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">JTextField dateFld = </span><span class="s0">new </span><span class="s1">JTextField()</span><span class="s0">;</span>
        <span class="s1">makeEditable(nameField</span><span class="s0">, </span><span class="s1">ageField</span><span class="s0">, </span><span class="s1">sexField</span><span class="s0">, </span><span class="s1">insField</span><span class="s0">, </span><span class="s1">phnField</span><span class="s0">, </span><span class="s1">disNameFld</span><span class="s0">, </span><span class="s1">dateFld)</span><span class="s0">;</span>
        <span class="s1">JButton submitButton = </span><span class="s0">new </span><span class="s1">JButton(</span><span class="s4">&quot;Submit&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">submitButton.addActionListener(</span><span class="s0">new </span><span class="s1">ActionListener() {</span>
            <span class="s0">public void </span><span class="s1">actionPerformed(ActionEvent e) {</span>
                <span class="s1">handlePatientDetails(nameField</span><span class="s0">, </span><span class="s1">ageField</span><span class="s0">, </span><span class="s1">sexField</span><span class="s0">, </span><span class="s1">insField</span><span class="s0">, </span><span class="s1">phnField</span><span class="s0">, </span><span class="s1">disNameFld</span><span class="s0">,</span>
                        <span class="s1">dateFld</span><span class="s0">, </span><span class="s1">frame)</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">})</span><span class="s0">;</span>
        <span class="s1">makePanel(nameLabel</span><span class="s0">, </span><span class="s1">nameField</span><span class="s0">, </span><span class="s1">ageLabel</span><span class="s0">, </span><span class="s1">ageField</span><span class="s0">, </span><span class="s1">sexLabel</span><span class="s0">, </span><span class="s1">sexField</span><span class="s0">, </span><span class="s1">insLbl</span><span class="s0">, </span><span class="s1">insField</span><span class="s0">, </span><span class="s1">phnLabel</span><span class="s0">, </span><span class="s1">phnField</span><span class="s0">,</span>
                <span class="s1">disNameLbl</span><span class="s0">, </span><span class="s1">disNameFld</span><span class="s0">, </span><span class="s1">dateLbl</span><span class="s0">, </span><span class="s1">dateFld</span><span class="s0">, </span><span class="s1">submitButton</span><span class="s0">,</span>
                <span class="s1">frame)</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// REQUIRES: all the proper label fields and their text values</span>
    <span class="s3">// EFFECTS: generates the appropriate labels and buttons for PatientDetailsGUI</span>
    <span class="s0">private void </span><span class="s1">makePanel(JLabel nameLabel</span><span class="s0">, </span><span class="s1">JTextField nameField</span><span class="s0">, </span><span class="s1">JLabel ageLabel</span><span class="s0">, </span><span class="s1">JTextField ageField</span><span class="s0">,</span>
                           <span class="s1">JLabel sexLabel</span><span class="s0">,</span>
                           <span class="s1">JTextField sexField</span><span class="s0">,</span>
                           <span class="s1">JLabel insuranceLabel</span><span class="s0">, </span><span class="s1">JTextField insuranceField</span><span class="s0">, </span><span class="s1">JLabel phnLabel</span><span class="s0">, </span><span class="s1">JTextField phnField</span><span class="s0">,</span>
                           <span class="s1">JLabel diseaseNameLabel</span><span class="s0">, </span><span class="s1">JTextField diseaseNameField</span><span class="s0">, </span><span class="s1">JLabel diagnosisDateLabel</span><span class="s0">,</span>
                           <span class="s1">JTextField diagnosisDateField</span><span class="s0">,</span>
                           <span class="s1">JButton submitButton</span><span class="s0">, </span><span class="s1">JFrame frame) {</span>
        <span class="s1">JPanel panel = </span><span class="s0">new </span><span class="s1">JPanel(</span><span class="s0">new </span><span class="s1">GridLayout(</span><span class="s5">8</span><span class="s0">, </span><span class="s5">2</span><span class="s1">))</span><span class="s0">;</span>
        <span class="s1">panel.add(nameLabel)</span><span class="s0">;</span>
        <span class="s1">panel.add(nameField)</span><span class="s0">;</span>
        <span class="s1">panel.add(ageLabel)</span><span class="s0">;</span>
        <span class="s1">panel.add(ageField)</span><span class="s0">;</span>
        <span class="s1">panel.add(sexLabel)</span><span class="s0">;</span>
        <span class="s1">panel.add(sexField)</span><span class="s0">;</span>
        <span class="s1">panel.add(insuranceLabel)</span><span class="s0">;</span>
        <span class="s1">panel.add(insuranceField)</span><span class="s0">;</span>
        <span class="s1">panel.add(phnLabel)</span><span class="s0">;</span>
        <span class="s1">panel.add(phnField)</span><span class="s0">;</span>
        <span class="s1">panel.add(diseaseNameLabel)</span><span class="s0">;</span>
        <span class="s1">panel.add(diseaseNameField)</span><span class="s0">;</span>
        <span class="s1">panel.add(diagnosisDateLabel)</span><span class="s0">;</span>
        <span class="s1">panel.add(diagnosisDateField)</span><span class="s0">;</span>
        <span class="s1">panel.add(submitButton)</span><span class="s0">;</span>
        <span class="s1">frame.add(panel)</span><span class="s0">;</span>
        <span class="s1">frame.pack()</span><span class="s0">;</span>
        <span class="s1">frame.setVisible(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// REQUIRES: a frame</span>
    <span class="s3">// MODIFIES: this</span>
    <span class="s3">// EFFECTS: displays the appropriate message to the user after saving the data</span>
    <span class="s0">private void </span><span class="s1">addPatientSuccessMessage(JFrame frame) {</span>
        <span class="s1">JOptionPane.showMessageDialog(frame</span><span class="s0">, </span><span class="s4">&quot;Patient added successfully!&quot;</span><span class="s0">, </span><span class="s4">&quot;Success&quot;</span><span class="s0">,</span>
                <span class="s1">JOptionPane.INFORMATION_MESSAGE</span><span class="s0">, new </span><span class="s1">ImageIcon(logo))</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">option = JOptionPane.showConfirmDialog(frame</span><span class="s0">, </span><span class="s4">&quot;Do you want to save the data?&quot;</span><span class="s0">, </span><span class="s4">&quot;Save data&quot;</span><span class="s0">,</span>
                <span class="s1">JOptionPane.YES_NO_OPTION)</span><span class="s0">;</span>
        <span class="s0">if </span><span class="s1">(option == JOptionPane.YES_OPTION) {</span>
            <span class="s3">// Save the data to file</span>
            <span class="s0">try </span><span class="s1">{</span>
                <span class="s1">patientFile.writePatientsToFile(patients)</span><span class="s0">;</span>
            <span class="s1">} </span><span class="s0">catch </span><span class="s1">(IOException ex) {</span>
                <span class="s0">throw new </span><span class="s1">RuntimeException(ex)</span><span class="s0">;</span>
            <span class="s1">}</span>
            <span class="s1">JOptionPane.showMessageDialog(frame</span><span class="s0">, </span><span class="s4">&quot;Data saved successfully!&quot;</span><span class="s0">, </span><span class="s4">&quot;Success&quot;</span><span class="s0">,</span>
                    <span class="s1">JOptionPane.INFORMATION_MESSAGE</span><span class="s0">, new </span><span class="s1">ImageIcon(logo))</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s3">// REQUIRES: all the JTextFields and JFrame</span>
    <span class="s3">// MODIFIES: this</span>
    <span class="s3">// EFFECTS: handles the patient's details as needed</span>
    <span class="s0">private void </span><span class="s1">handlePatientDetails(JTextField nameField</span><span class="s0">, </span><span class="s1">JTextField ageField</span><span class="s0">, </span><span class="s1">JTextField sexField</span><span class="s0">,</span>
                                      <span class="s1">JTextField insuranceField</span><span class="s0">, </span><span class="s1">JTextField phnField</span><span class="s0">, </span><span class="s1">JTextField diseaseNameField</span><span class="s0">,</span>
                                      <span class="s1">JTextField diagnosisDateField</span><span class="s0">, </span><span class="s1">JFrame frame) {</span>
        <span class="s1">String name = nameField.getText()</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">age = Integer.parseInt(ageField.getText())</span><span class="s0">;</span>
        <span class="s1">String sex = sexField.getText()</span><span class="s0">;</span>
        <span class="s1">String insurance = insuranceField.getText()</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">phn = Integer.parseInt(phnField.getText())</span><span class="s0">;</span>
        <span class="s1">String disName = diseaseNameField.getText()</span><span class="s0">;</span>
        <span class="s1">DateTimeFormatter formatter = DateTimeFormatter.ofPattern(</span><span class="s4">&quot;yyyy/MM/dd&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">LocalDate diagnosisDate = LocalDate.parse(diagnosisDateField.getText()</span><span class="s0">, </span><span class="s1">formatter)</span><span class="s0">;</span>
        <span class="s3">// Create a new patient object</span>
        <span class="s1">Patient patient = </span><span class="s0">new </span><span class="s1">Patient(name</span><span class="s0">, </span><span class="s1">age</span><span class="s0">, </span><span class="s1">sex</span><span class="s0">, </span><span class="s1">insurance</span><span class="s0">, </span><span class="s1">phn)</span><span class="s0">;</span>
        <span class="s1">patient.addDisease(disName</span><span class="s0">, </span><span class="s1">diagnosisDate)</span><span class="s0">;</span>
        <span class="s3">// Add the patient to the list</span>
        <span class="s1">patients.add(patient)</span><span class="s0">;</span>
        <span class="s3">// Clear the text fields</span>
        <span class="s1">nameField.setText(</span><span class="s4">&quot;&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">ageField.setText(</span><span class="s4">&quot;&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">sexField.setText(</span><span class="s4">&quot;&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">insuranceField.setText(</span><span class="s4">&quot;&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">phnField.setText(</span><span class="s4">&quot;&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">addPatientSuccessMessage(frame)</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// REQUIRES: the JTextFields for different patient details</span>
    <span class="s3">// EFFECTS: makes those fields editable</span>
    <span class="s0">private void </span><span class="s1">makeEditable(JTextField nameField</span><span class="s0">, </span><span class="s1">JTextField ageField</span><span class="s0">, </span><span class="s1">JTextField sexField</span><span class="s0">,</span>
                              <span class="s1">JTextField insuranceField</span><span class="s0">,</span>
                              <span class="s1">JTextField phnField</span><span class="s0">, </span><span class="s1">JTextField diseaseNameField</span><span class="s0">, </span><span class="s1">JTextField diagnosisDateField) {</span>
        <span class="s1">nameField.setEditable(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">ageField.setEditable(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">sexField.setEditable(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">insuranceField.setEditable(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">phnField.setEditable(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">diagnosisDateField.setEditable(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">diseaseNameField.setEditable(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>

</pre>
</body>
</html>